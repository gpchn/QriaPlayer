<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Qria Player</title>
    <link rel="stylesheet" href="/static/css/main.css" />
    <link rel="stylesheet" href="/static/css/font-awesome.all.min.css" />
  </head>
  <body>
    <div class="container">
      <!-- 添加隐藏的checkbox用于控制播放状态 -->
      <input type="checkbox" id="playerStateCheckbox" style="display: none" />
      <!-- 添加隐藏的checkbox用于控制媒体类型 -->
      <input type="checkbox" id="mediaTypeCheckbox" style="display: none" />
      <!-- 添加隐藏的checkbox用于控制滚动状态 -->
      <input type="checkbox" id="scrollTriggerCheckbox" style="display: none" />

      <!-- 左侧播放列表 -->
      <div class="playlist-container">
        <div class="function-buttons">
          <button class="function-btn" id="settingsBtn" title="设置">
            <i class="fa-solid fa-cog"></i>
          </button>
          <button class="function-btn" id="importBtn" title="导入">
            <i class="fa-solid fa-file-import"></i>
          </button>
        </div>
        <input type="search" id="searchBox" placeholder="搜索歌曲..." />
        <ul id="playlist"></ul>
        <button
          id="scrollToPlayingBtn"
          title="定位到当前播放歌曲"
          aria-label="定位到当前播放歌曲"
        >
          <i class="fa-solid fa-crosshairs"></i>
        </button>
        <button id="scrollTopBtn" title="回到顶部" aria-label="回到顶部">
          <i class="fa-solid fa-arrow-up"></i>
        </button>
      </div>
      <!-- 右侧播放器 -->
      <div class="music-player-container" id="musicPlayerContainer">
        <div class="info">
          <h2 id="songTitle"></h2>
          <p id="songArtist"></p>
        </div>
        <div class="lyrics-container" id="lyricsBox"></div>
        <div class="progress-container">
          <label for="progressBar" class="visually-hidden"></label>
          <input
            type="range"
            id="progressBar"
            value="0"
            class="progress"
            min="0"
            max="100"
            step="0.1"
            title="播放进度"
            placeholder="播放进度"
          />
          <div class="time-display">
            <span id="currentTime">0:00</span>
            <span id="duration">0:00</span>
          </div>
        </div>
        <div class="controls">
          <button id="prevBtn" title="上一曲">
            <i class="fa-solid fa-step-backward"></i>
          </button>
          <button id="playBtn" title="播放/暂停" class="paused">
            <i class="fa-solid fa-play" id="playPauseIcon"></i>
          </button>
          <button id="nextBtn" title="下一曲">
            <i class="fa-solid fa-step-forward"></i>
          </button>
          <button id="loopBtn" title="循环模式" class="loop-list">
            <i class="fa-solid fa-repeat" id="loopIcon"></i>
            <span id="loopText"></span>
          </button>
          <div class="volume-container unmuted">
            <button id="muteBtn" title="静音">
              <i class="fa-solid fa-volume-up" id="muteIcon"></i>
            </button>
            <input
              type="range"
              id="volumeSlider"
              min="0"
              max="1"
              step="0.01"
              value="1"
              title="音量调节"
              placeholder="音量调节"
            />
          </div>
        </div>
      </div>
      <div class="video-player-container" id="videoPlayerContainer">
        <div class="info">
          <h2 id="videoTitle"></h2>
          <p id="videoArtist"></p>
        </div>
        <video class="video-player" id="videoPlayer" controls></video>
      </div>
      <div class="welcome-container" id="welcomeContainer">
        <img
          src="/static/QriaPlayer.svg"
          alt="QriaPlayer"
          class="welcome-icon"
        />
      </div>
    </div>

    <!-- 设置显示框 -->
    <div class="function-modal" id="settingsModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>设置</h3>
          <button class="close-btn" id="closeSettingsBtn" title="关闭设置">
            <i class="fa-solid fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="modal-sidebar">
            <ul class="sidebar-menu">
              <li class="sidebar-item active" data-tab="basic-settings">
                基本设置
              </li>
              <li class="sidebar-item" data-tab="audio-settings">音频设置</li>
              <li class="sidebar-item" data-tab="ui-settings">界面设置</li>
              <li class="sidebar-item" data-tab="about">关于</li>
            </ul>
          </div>
          <div class="modal-main">
            <!-- 设置功能内容区域 -->
            <div class="settings-content">
              <!-- todo: 实现设置功能内容 -->
              <p class="placeholder-text">设置功能开发中...</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 导入显示框 -->
    <div class="function-modal" id="importModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>导入</h3>
          <button class="close-btn" id="closeImportBtn" title="关闭导入">
            <i class="fa-solid fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="modal-sidebar">
            <ul class="sidebar-menu">
              <li class="sidebar-item active" data-tab="local-import">
                本地导入
              </li>
              <li class="sidebar-item" data-tab="url-import">链接导入</li>
              <li class="sidebar-item" data-tab="bilibili-import">B站解析</li>
            </ul>
          </div>
          <div class="modal-main">
            <!-- 导入功能内容区域 -->
            <div
              class="import-content active"
              id="local-import"
              style="display: block"
            >
              <div class="dropzone" id="fileDropzone">
                <div class="dropzone-content">
                  <button class="action-btn" id="selectFileBtn">
                    选择文件
                  </button>
                  <label for="fileInput" class="visually-hidden"
                    >拖放音频文件到此处</label
                  >
                  <input
                    type="file"
                    id="fileInput"
                    accept=".mp3,.wav,.flac"
                    multiple
                    class="hidden-file-input"
                  />
                </div>
              </div>
              <div class="upload-list" id="uploadList"></div>
            </div>
            <div class="import-content" id="url-import" style="display: none">
              <div class="url-import-form">
                <div class="form-group">
                  <label for="musicUrl">音乐链接</label>
                  <input
                    type="text"
                    id="musicUrl"
                    placeholder="输入音乐直链地址..."
                  />
                </div>
                <div class="form-group">
                  <label for="musicTitle">音乐标题 (可选)</label>
                  <input
                    type="text"
                    id="musicTitle"
                    placeholder="输入音乐标题..."
                  />
                </div>
                <div class="form-group">
                  <label for="musicArtist">艺术家 (可选)</label>
                  <input
                    type="text"
                    id="musicArtist"
                    placeholder="输入艺术家名称..."
                  />
                </div>
                <button class="action-btn" id="importUrlBtn">导入链接</button>
              </div>
            </div>
            <div
              class="import-content"
              id="bilibili-import"
              style="display: none"
            >
              <div class="bilibili-import-form">
                <div class="form-group">
                  <label for="biliUrl">B站视频链接</label>
                  <input
                    type="text"
                    id="biliUrl"
                    placeholder="例如: https://www.bilibili.com/video/BVxxxxxxxxx"
                  />
                </div>
                <button class="action-btn" id="parseBiliBtn">解析视频</button>
                <div class="bili-result" id="biliResult"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript引入 - 按依赖顺序加载 -->
    <script src="/static/js/main.js"></script>
  </body>
</html>
